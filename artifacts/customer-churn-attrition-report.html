<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Customer Churn & Attrition Analysis</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background: linear-gradient(135deg, #fc8181 0%, #f56565 100%);
            padding: 20px;
            min-height: 100vh;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        .header {
            background: white;
            padding: 40px;
            border-radius: 16px;
            margin-bottom: 30px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.1);
            text-align: center;
        }

        .header h1 {
            font-size: 42px;
            font-weight: 800;
            background: linear-gradient(135deg, #fc8181 0%, #f56565 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 10px;
        }

        .header p {
            font-size: 18px;
            color: #718096;
        }

        .alert-box {
            background: linear-gradient(135deg, #fc8181 0%, #f56565 100%);
            color: white;
            padding: 30px;
            border-radius: 12px;
            margin-bottom: 30px;
            box-shadow: 0 10px 40px rgba(245, 101, 101, 0.3);
        }

        .alert-box h2 {
            font-size: 28px;
            font-weight: 700;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .alert-box p {
            font-size: 16px;
            opacity: 0.95;
            line-height: 1.6;
        }

        .metrics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .metric-card {
            background: white;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            transition: transform 0.2s;
        }

        .metric-card:hover {
            transform: translateY(-5px);
        }

        .metric-card.critical {
            background: linear-gradient(135deg, #fc8181 0%, #f56565 100%);
            color: white;
        }

        .metric-card.warning {
            background: linear-gradient(135deg, #f6ad55 0%, #ed8936 100%);
            color: white;
        }

        .metric-card.info {
            background: linear-gradient(135deg, #4299e1 0%, #3182ce 100%);
            color: white;
        }

        .metric-label {
            font-size: 14px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            opacity: 0.8;
            margin-bottom: 10px;
        }

        .metric-value {
            font-size: 48px;
            font-weight: 700;
            margin-bottom: 5px;
        }

        .metric-subtitle {
            font-size: 14px;
            opacity: 0.7;
        }

        .chart-container {
            background: white;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            margin-bottom: 30px;
        }

        .chart-container h2 {
            font-size: 24px;
            font-weight: 700;
            color: #2d3748;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid #e2e8f0;
        }

        .data-table {
            background: white;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            overflow-x: auto;
            margin-bottom: 30px;
        }

        table {
            width: 100%;
            border-collapse: collapse;
        }

        th {
            background: linear-gradient(135deg, #fc8181 0%, #f56565 100%);
            color: white;
            padding: 15px;
            text-align: left;
            font-weight: 600;
            font-size: 14px;
        }

        td {
            padding: 12px 15px;
            border-bottom: 1px solid #e2e8f0;
            font-size: 14px;
        }

        tr:hover {
            background: #fff5f5;
        }

        .cohort-name {
            font-weight: 600;
            color: #2d3748;
        }

        .number {
            font-family: 'Courier New', monospace;
            font-weight: 600;
            color: #4a5568;
        }

        .critical-number {
            font-family: 'Courier New', monospace;
            font-weight: 700;
            color: #e53e3e;
            font-size: 16px;
        }

        .percentage {
            font-weight: 600;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 12px;
        }

        .percentage.critical {
            background: #fed7d7;
            color: #742a2a;
        }

        .percentage.warning {
            background: #feebc8;
            color: #7c2d12;
        }

        .percentage.good {
            background: #c6f6d5;
            color: #22543d;
        }

        .insights-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .insight-card {
            background: white;
            padding: 25px;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            border-left: 4px solid #fc8181;
        }

        .insight-card h3 {
            font-size: 18px;
            font-weight: 700;
            color: #2d3748;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .insight-card ul {
            list-style: none;
            padding: 0;
        }

        .insight-card li {
            padding: 8px 0;
            color: #4a5568;
            line-height: 1.6;
            display: flex;
            align-items: start;
            gap: 10px;
        }

        .insight-card li:before {
            content: "‚Üí";
            color: #fc8181;
            font-weight: 700;
            flex-shrink: 0;
        }

        .timeline {
            background: white;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            margin-bottom: 30px;
        }

        .timeline h2 {
            font-size: 24px;
            font-weight: 700;
            color: #2d3748;
            margin-bottom: 30px;
            padding-bottom: 10px;
            border-bottom: 2px solid #e2e8f0;
        }

        .timeline-item {
            display: flex;
            gap: 20px;
            margin-bottom: 30px;
            position: relative;
            padding-left: 40px;
        }

        .timeline-item:before {
            content: "";
            position: absolute;
            left: 15px;
            top: 0;
            bottom: -30px;
            width: 2px;
            background: #e2e8f0;
        }

        .timeline-item:last-child:before {
            display: none;
        }

        .timeline-marker {
            position: absolute;
            left: 0;
            top: 5px;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 12px;
            color: white;
        }

        .timeline-marker.critical {
            background: #fc8181;
        }

        .timeline-marker.warning {
            background: #f6ad55;
        }

        .timeline-content {
            flex: 1;
        }

        .timeline-content h3 {
            font-size: 18px;
            font-weight: 700;
            color: #2d3748;
            margin-bottom: 5px;
        }

        .timeline-content .value {
            font-size: 32px;
            font-weight: 700;
            color: #e53e3e;
            margin-bottom: 5px;
        }

        .timeline-content p {
            color: #718096;
            font-size: 14px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Customer Churn & Attrition Analysis</h1>
            <p>Comprehensive Overview of Customer Loss Patterns</p>
        </div>

        <div class="alert-box">
            <h2>
                <span style="font-size: 32px;">‚ö†Ô∏è</span>
                Critical Churn Alert
            </h2>
            <p>Out of <strong>200,031 total customers</strong>, <strong>143,368 customers (71.7%)</strong> have churned after more than 90 days. This represents a significant retention challenge requiring immediate attention.</p>
        </div>

        <div class="metrics-grid">
            <div class="metric-card critical">
                <div class="metric-label">Total Customers</div>
                <div class="metric-value">200,031</div>
                <div class="metric-subtitle">baseline customer count</div>
            </div>
            <div class="metric-card critical">
                <div class="metric-label">90+ Days Churn</div>
                <div class="metric-value">143,368</div>
                <div class="metric-subtitle">71.7% churned</div>
            </div>
            <div class="metric-card warning">
                <div class="metric-label">Total Churned</div>
                <div class="metric-value">200,031</div>
                <div class="metric-subtitle">all time periods combined</div>
            </div>
            <div class="metric-card info">
                <div class="metric-label">30 Days Churn</div>
                <div class="metric-value">1,086</div>
                <div class="metric-subtitle">0.5% churned early</div>
            </div>
        </div>

        <div class="timeline">
            <h2>Churn Timeline: Customer Loss by Period</h2>

            <div class="timeline-item">
                <div class="timeline-marker warning">30d</div>
                <div class="timeline-content">
                    <h3>30 Days Customer Churn</h3>
                    <div class="value">1,086</div>
                    <p>0.54% of total customers churned within the first 30 days</p>
                </div>
            </div>

            <div class="timeline-item">
                <div class="timeline-marker warning">30d+</div>
                <div class="timeline-content">
                    <h3>More than 30 Days Customer Churn</h3>
                    <div class="value">30,042</div>
                    <p>15.02% of total customers churned after 30 days</p>
                </div>
            </div>

            <div class="timeline-item">
                <div class="timeline-marker warning">60d+</div>
                <div class="timeline-content">
                    <h3>More than 60 Days Customer Churn</h3>
                    <div class="value">25,535</div>
                    <p>12.77% of total customers churned after 60 days</p>
                </div>
            </div>

            <div class="timeline-item">
                <div class="timeline-marker critical">90d+</div>
                <div class="timeline-content">
                    <h3>More than 90 Days Customer Churn</h3>
                    <div class="value">143,368</div>
                    <p><strong>71.67% of total customers churned after 90 days - CRITICAL LEVEL</strong></p>
                </div>
            </div>
        </div>

        <div class="chart-container">
            <h2>Churn Distribution by Time Period</h2>
            <canvas id="churnChart"></canvas>
        </div>

        <div class="chart-container">
            <h2>Cumulative Churn Over Time</h2>
            <canvas id="cumulativeChart"></canvas>
        </div>

        <div class="data-table">
            <h2>Detailed Churn Breakdown</h2>
            <table>
                <thead>
                    <tr>
                        <th>Churn Cohort</th>
                        <th>Total Customers</th>
                        <th>Churned Customers</th>
                        <th>Churn Rate %</th>
                        <th>Status</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td class="cohort-name">30 Days Customer Churn</td>
                        <td class="number">200,031</td>
                        <td class="critical-number">1,086</td>
                        <td><span class="percentage good">0.54%</span></td>
                        <td>‚úì Acceptable</td>
                    </tr>
                    <tr>
                        <td class="cohort-name">More than 30 Days Customer Churn</td>
                        <td class="number">200,031</td>
                        <td class="critical-number">30,042</td>
                        <td><span class="percentage warning">15.02%</span></td>
                        <td>‚ö†Ô∏è Concerning</td>
                    </tr>
                    <tr>
                        <td class="cohort-name">More than 60 Days Customer Churn</td>
                        <td class="number">200,031</td>
                        <td class="critical-number">25,535</td>
                        <td><span class="percentage warning">12.77%</span></td>
                        <td>‚ö†Ô∏è Concerning</td>
                    </tr>
                    <tr style="background: #fff5f5;">
                        <td class="cohort-name" style="font-weight: 700;">More than 90 Days Customer Churn</td>
                        <td class="number">200,031</td>
                        <td class="critical-number" style="font-size: 18px;">143,368</td>
                        <td><span class="percentage critical" style="font-size: 14px;">71.67%</span></td>
                        <td style="color: #e53e3e; font-weight: 700;">üö® CRITICAL</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <div class="insights-grid">
            <div class="insight-card">
                <h3>üìä Key Findings</h3>
                <ul>
                    <li>71.67% of customers churn after 90 days - the highest loss period</li>
                    <li>Early churn (30 days) is relatively low at 0.54%</li>
                    <li>The 30-90 day window shows moderate churn (15.02% at 30d+)</li>
                    <li>Long-term retention is the primary challenge</li>
                </ul>
            </div>

            <div class="insight-card">
                <h3>üéØ Recommended Actions</h3>
                <ul>
                    <li>Implement 90-day engagement campaigns to prevent long-term churn</li>
                    <li>Analyze why customers disengage after the 60-90 day mark</li>
                    <li>Create retention incentives for customers approaching 60 days</li>
                    <li>Investigate common characteristics of 90+ day churned customers</li>
                </ul>
            </div>

            <div class="insight-card">
                <h3>üí° Strategic Priorities</h3>
                <ul>
                    <li>Focus retention efforts on 60-90 day customer segment</li>
                    <li>Maintain current onboarding - 30-day churn is acceptable</li>
                    <li>Develop re-engagement campaigns for dormant users</li>
                    <li>Set up early warning indicators for at-risk customers</li>
                </ul>
            </div>

            <div class="insight-card">
                <h3>üìà Impact Analysis</h3>
                <ul>
                    <li>Reducing 90+ day churn by 10% saves ~14,337 customers</li>
                    <li>Current retention rate: 28.33% (56,663 retained)</li>
                    <li>Industry benchmark for fintech: 75-80% retention</li>
                    <li>Gap to benchmark: 46.67-51.67 percentage points</li>
                </ul>
            </div>
        </div>

        <div class="chart-container">
            <h2>Churn Rate Comparison</h2>
            <canvas id="comparisonChart"></canvas>
        </div>

        <div class="data-table">
            <h2>Retention Metrics Summary</h2>
            <table>
                <thead>
                    <tr>
                        <th>Metric</th>
                        <th>Value</th>
                        <th>Interpretation</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td class="cohort-name">Overall Retention Rate</td>
                        <td class="number">28.33%</td>
                        <td>56,663 customers retained from 200,031 baseline</td>
                    </tr>
                    <tr>
                        <td class="cohort-name">Overall Churn Rate</td>
                        <td class="critical-number">71.67%</td>
                        <td>143,368 customers lost (90+ days cohort)</td>
                    </tr>
                    <tr>
                        <td class="cohort-name">Early Churn (0-30 days)</td>
                        <td class="number">0.54%</td>
                        <td>Good onboarding performance</td>
                    </tr>
                    <tr>
                        <td class="cohort-name">Mid-term Churn (30-60 days)</td>
                        <td class="number">2.25%</td>
                        <td>Calculated from 30d+ and 60d+ difference</td>
                    </tr>
                    <tr>
                        <td class="cohort-name">Long-term Churn (90+ days)</td>
                        <td class="critical-number">71.67%</td>
                        <td>Critical retention issue</td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>

    <script>
        // Churn Distribution Chart
        const churnCtx = document.getElementById('churnChart').getContext('2d');
        const churnChart = new Chart(churnCtx, {
            type: 'bar',
            data: {
                labels: ['30 Days', '30+ Days', '60+ Days', '90+ Days'],
                datasets: [{
                    label: 'Churned Customers',
                    data: [1086, 30042, 25535, 143368],
                    backgroundColor: [
                        'rgba(72, 187, 120, 0.8)',
                        'rgba(237, 137, 54, 0.8)',
                        'rgba(237, 137, 54, 0.8)',
                        'rgba(252, 129, 129, 0.9)'
                    ],
                    borderColor: [
                        'rgba(72, 187, 120, 1)',
                        'rgba(237, 137, 54, 1)',
                        'rgba(237, 137, 54, 1)',
                        'rgba(252, 129, 129, 1)'
                    ],
                    borderWidth: 2
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: true,
                plugins: {
                    legend: {
                        display: false
                    },
                    tooltip: {
                        callbacks: {
                            label: function(context) {
                                const value = context.parsed.y.toLocaleString();
                                const percentage = ((context.parsed.y / 200031) * 100).toFixed(2);
                                return `${value} customers (${percentage}%)`;
                            }
                        }
                    }
                },
                scales: {
                    y: {
                        beginAtZero: true,
                        ticks: {
                            callback: function(value) {
                                return value.toLocaleString();
                            }
                        }
                    }
                }
            }
        });

        // Cumulative Churn Chart
        const cumulativeCtx = document.getElementById('cumulativeChart').getContext('2d');
        const cumulativeChart = new Chart(cumulativeCtx, {
            type: 'line',
            data: {
                labels: ['0 Days', '30 Days', '60 Days', '90+ Days'],
                datasets: [{
                    label: 'Cumulative Churn',
                    data: [0, 1086, 31128, 143368],
                    backgroundColor: 'rgba(252, 129, 129, 0.2)',
                    borderColor: 'rgba(252, 129, 129, 1)',
                    borderWidth: 3,
                    fill: true,
                    tension: 0.4
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: true,
                plugins: {
                    legend: {
                        display: false
                    },
                    tooltip: {
                        callbacks: {
                            label: function(context) {
                                const value = context.parsed.y.toLocaleString();
                                const percentage = ((context.parsed.y / 200031) * 100).toFixed(2);
                                return `${value} customers churned (${percentage}%)`;
                            }
                        }
                    }
                },
                scales: {
                    y: {
                        beginAtZero: true,
                        max: 200031,
                        ticks: {
                            callback: function(value) {
                                return value.toLocaleString();
                            }
                        }
                    }
                }
            }
        });

        // Comparison Chart - Churn vs Retention
        const comparisonCtx = document.getElementById('comparisonChart').getContext('2d');
        const comparisonChart = new Chart(comparisonCtx, {
            type: 'doughnut',
            data: {
                labels: ['Churned (90+ days)', 'Retained'],
                datasets: [{
                    data: [143368, 56663],
                    backgroundColor: [
                        'rgba(252, 129, 129, 0.8)',
                        'rgba(72, 187, 120, 0.8)'
                    ],
                    borderColor: [
                        'rgba(252, 129, 129, 1)',
                        'rgba(72, 187, 120, 1)'
                    ],
                    borderWidth: 2
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: true,
                plugins: {
                    legend: {
                        position: 'bottom'
                    },
                    tooltip: {
                        callbacks: {
                            label: function(context) {
                                const value = context.parsed.toLocaleString();
                                const percentage = ((context.parsed / 200031) * 100).toFixed(2);
                                return `${context.label}: ${value} (${percentage}%)`;
                            }
                        }
                    }
                }
            }
        });
    </script>
</body>
</html>